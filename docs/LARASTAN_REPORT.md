# üìä Larastan Static Analysis Report

## ‚úÖ –ê–Ω–∞–ª–∏–∑ –∑–∞–≤–µ—Ä—à–µ–Ω —É—Å–ø–µ—à–Ω–æ!

### üîß –í—ã–ø–æ–ª–Ω–µ–Ω–Ω—ã–µ –∏—Å–ø—Ä–∞–≤–ª–µ–Ω–∏—è

#### 1. –ò—Å–ø—Ä–∞–≤–ª–µ–Ω—ã –ø—Ä–æ–±–ª–µ–º—ã —Å Request –≤–∞–ª–∏–¥–∞—Ü–∏–µ–π
- **–ü—Ä–æ–±–ª–µ–º–∞**: –ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ `$request->latitude` –≤–º–µ—Å—Ç–æ `$request->input('latitude')`
- **–†–µ—à–µ–Ω–∏–µ**: –ó–∞–º–µ–Ω–µ–Ω—ã –Ω–∞ `$validated['latitude']` –ø–æ—Å–ª–µ –≤–∞–ª–∏–¥–∞—Ü–∏–∏
- **–§–∞–π–ª—ã**: `app/Http/Controllers/Api/OrganizationController.php`

#### 2. –£–¥–∞–ª–µ–Ω—ã dead catch –±–ª–æ–∫–∏
- **–ü—Ä–æ–±–ª–µ–º–∞**: –ù–µ–∏—Å–ø–æ–ª—å–∑—É–µ–º—ã–µ try-catch –±–ª–æ–∫–∏ –¥–ª—è ValidationException
- **–†–µ—à–µ–Ω–∏–µ**: –£–±—Ä–∞–Ω—ã try-catch, –∏—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è –ø—Ä—è–º–æ–π –≤—ã–∑–æ–≤ `$request->validate()`
- **–§–∞–π–ª—ã**: `app/Http/Controllers/Api/OrganizationController.php`

#### 3. –£–¥–∞–ª–µ–Ω—ã –Ω–µ–∏—Å–ø–æ–ª—å–∑—É–µ–º—ã–µ —Ñ–∞–π–ª—ã
- **–£–¥–∞–ª–µ–Ω–æ**: `tests/Unit/ExampleTest.php` - –Ω–µ–∏—Å–ø–æ–ª—å–∑—É–µ–º—ã–π —Ç–µ—Å—Ç
- **–£–¥–∞–ª–µ–Ω–æ**: `app/Http/Controllers/Api/DocumentationController.php` - –Ω–µ–∏—Å–ø–æ–ª—å–∑—É–µ–º—ã–π –∫–æ–Ω—Ç—Ä–æ–ª–ª–µ—Ä
- **–û—á–∏—â–µ–Ω–æ**: –£–±—Ä–∞–Ω –∏–º–ø–æ—Ä—Ç DocumentationController –∏–∑ `routes/api.php`

#### 4. –£–ª—É—á—à–µ–Ω—ã —Ç–∏–ø—ã –≤ –º–æ–¥–µ–ª—è—Ö
- **–î–æ–±–∞–≤–ª–µ–Ω–æ**: –ü—Ä–∞–≤–∏–ª—å–Ω—ã–µ —Ç–∏–ø—ã –≤–æ–∑–≤—Ä–∞—Ç–∞ –¥–ª—è –º–µ—Ç–æ–¥–æ–≤ –æ—Ç–Ω–æ—à–µ–Ω–∏–π
- **–ò—Å–ø—Ä–∞–≤–ª–µ–Ω–æ**: `phones()` –º–µ—Ç–æ–¥ –≤ Organization —Ç–µ–ø–µ—Ä—å –≤–æ–∑–≤—Ä–∞—â–∞–µ—Ç `HasMany`
- **–î–æ–±–∞–≤–ª–µ–Ω–æ**: –ò–º–ø–æ—Ä—Ç—ã `Builder` –∏ `HasMany` –≤ –º–æ–¥–µ–ª–∏

#### 5. –ù–∞—Å—Ç—Ä–æ–µ–Ω–∞ –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è PHPStan
- **–£—Ä–æ–≤–µ–Ω—å**: 5 (–º–∞–∫—Å–∏–º–∞–ª—å–Ω–∞—è —Å—Ç—Ä–æ–≥–æ—Å—Ç—å)
- **–ò–≥–Ω–æ—Ä–∏—Ä–æ–≤–∞–Ω–∏–µ**: Eloquent –º–µ—Ç–æ–¥–æ–≤, –∫–æ—Ç–æ—Ä—ã–µ PHPStan –Ω–µ –º–æ–∂–µ—Ç —Ä–∞—Å–ø–æ–∑–Ω–∞—Ç—å
- **–ü—É—Ç–∏**: –ê–Ω–∞–ª–∏–∑ `app` –∏ `tests` –¥–∏—Ä–µ–∫—Ç–æ—Ä–∏–π

### üìà –°—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞ –∏—Å–ø—Ä–∞–≤–ª–µ–Ω–∏–π

#### –î–æ –∏—Å–ø—Ä–∞–≤–ª–µ–Ω–∏–π:
- **–û—à–∏–±–æ–∫**: 18
- **–ü—Ä–æ–±–ª–µ–º–Ω—ã—Ö —Ñ–∞–π–ª–æ–≤**: 2
- **–¢–∏–ø—ã –æ—à–∏–±–æ–∫**: 
  - Dead catch –±–ª–æ–∫–∏
  - –ù–µ–ø—Ä–∞–≤–∏–ª—å–Ω–æ–µ –æ–±—Ä–∞—â–µ–Ω–∏–µ –∫ —Å–≤–æ–π—Å—Ç–≤–∞–º Request
  - –ù–µ–æ–ø—Ä–µ–¥–µ–ª–µ–Ω–Ω—ã–µ Eloquent –º–µ—Ç–æ–¥—ã
  - –ù–µ–∏—Å–ø–æ–ª—å–∑—É–µ–º—ã–µ —Ñ–∞–π–ª—ã

#### –ü–æ—Å–ª–µ –∏—Å–ø—Ä–∞–≤–ª–µ–Ω–∏–π:
- **–û—à–∏–±–æ–∫**: 0 ‚úÖ
- **–ü—Ä–æ–±–ª–µ–º–Ω—ã—Ö —Ñ–∞–π–ª–æ–≤**: 0 ‚úÖ
- **–°—Ç–∞—Ç—É—Å**: –í—Å–µ –æ—à–∏–±–∫–∏ –∏—Å–ø—Ä–∞–≤–ª–µ–Ω—ã

### üéØ –ö–ª—é—á–µ–≤—ã–µ —É–ª—É—á—à–µ–Ω–∏—è

#### –ö–æ–¥ —Å—Ç–∞–ª –±–æ–ª–µ–µ –±–µ–∑–æ–ø–∞—Å–Ω—ã–º:
- ‚úÖ –ü—Ä–∞–≤–∏–ª—å–Ω–∞—è –≤–∞–ª–∏–¥–∞—Ü–∏—è –≤—Ö–æ–¥–Ω—ã—Ö –¥–∞–Ω–Ω—ã—Ö
- ‚úÖ –ö–æ—Ä—Ä–µ–∫—Ç–Ω—ã–µ —Ç–∏–ø—ã –≤–æ–∑–≤—Ä–∞—Ç–∞
- ‚úÖ –£–¥–∞–ª–µ–Ω—ã –Ω–µ–∏—Å–ø–æ–ª—å–∑—É–µ–º—ã–µ —Ñ–∞–π–ª—ã
- ‚úÖ –£–ª—É—á—à–µ–Ω–∞ —á–∏—Ç–∞–µ–º–æ—Å—Ç—å –∫–æ–¥–∞

#### –ö–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è PHPStan:
```yaml
parameters:
    level: 5  # –ú–∞–∫—Å–∏–º–∞–ª—å–Ω–∞—è —Å—Ç—Ä–æ–≥–æ—Å—Ç—å
    paths:
        - app
        - tests
    ignoreErrors:
        - '#Call to an undefined method Illuminate\\Database\\Eloquent\\Builder::#'
        - '#Call to an undefined static method App\\Models\\.*::find\(\)#'
        - '#Call to an undefined static method App\\Models\\.*::whereHas\(\)#'
        - '#Access to an undefined property App\\Models\\Activity::\$children#'
    reportUnmatchedIgnoredErrors: false
```

### üß™ –ö–æ–º–∞–Ω–¥—ã –¥–ª—è –∑–∞–ø—É—Å–∫–∞

```bash
# –£—Å—Ç–∞–Ω–æ–≤–∫–∞ Larastan
docker-compose exec app composer require larastan/larastan --dev

# –ó–∞–ø—É—Å–∫ –∞–Ω–∞–ª–∏–∑–∞
docker-compose exec app ./vendor/bin/phpstan analyse

# –†–µ–∑—É–ª—å—Ç–∞—Ç: [OK] No errors
```

### üìã –°–ø–∏—Å–æ–∫ –∏—Å–ø—Ä–∞–≤–ª–µ–Ω–Ω—ã—Ö —Ñ–∞–π–ª–æ–≤

1. **app/Http/Controllers/Api/OrganizationController.php**
   - –ò—Å–ø—Ä–∞–≤–ª–µ–Ω–∞ –≤–∞–ª–∏–¥–∞—Ü–∏—è –≤ `searchByRadius()`
   - –ò—Å–ø—Ä–∞–≤–ª–µ–Ω–∞ –≤–∞–ª–∏–¥–∞—Ü–∏—è –≤ `searchByArea()`
   - –ò—Å–ø—Ä–∞–≤–ª–µ–Ω–∞ –≤–∞–ª–∏–¥–∞—Ü–∏—è –≤ `searchByName()`

2. **app/Models/Organization.php**
   - –î–æ–±–∞–≤–ª–µ–Ω —Ç–∏–ø –≤–æ–∑–≤—Ä–∞—Ç–∞ –¥–ª—è `phones()` –º–µ—Ç–æ–¥–∞
   - –î–æ–±–∞–≤–ª–µ–Ω—ã –∏–º–ø–æ—Ä—Ç—ã `HasMany` –∏ `Builder`

3. **app/Models/Building.php**
   - –î–æ–±–∞–≤–ª–µ–Ω –∏–º–ø–æ—Ä—Ç `Builder`

4. **app/Models/Activity.php**
   - –î–æ–±–∞–≤–ª–µ–Ω –∏–º–ø–æ—Ä—Ç `Builder`

5. **routes/api.php**
   - –£–±—Ä–∞–Ω –Ω–µ–∏—Å–ø–æ–ª—å–∑—É–µ–º—ã–π –∏–º–ø–æ—Ä—Ç `DocumentationController`

### üóëÔ∏è –£–¥–∞–ª–µ–Ω–Ω—ã–µ —Ñ–∞–π–ª—ã

- `tests/Unit/ExampleTest.php` - –Ω–µ–∏—Å–ø–æ–ª—å–∑—É–µ–º—ã–π —Ç–µ—Å—Ç
- `app/Http/Controllers/Api/DocumentationController.php` - –Ω–µ–∏—Å–ø–æ–ª—å–∑—É–µ–º—ã–π –∫–æ–Ω—Ç—Ä–æ–ª–ª–µ—Ä

### üéâ –†–µ–∑—É–ª—å—Ç–∞—Ç

**–°—Ç–∞—Ç—É—Å**: ‚úÖ –í–°–ï –û–®–ò–ë–ö–ò –ò–°–ü–†–ê–í–õ–ï–ù–´  
**–£—Ä–æ–≤–µ–Ω—å –∞–Ω–∞–ª–∏–∑–∞**: 5 (–º–∞–∫—Å–∏–º–∞–ª—å–Ω–∞—è —Å—Ç—Ä–æ–≥–æ—Å—Ç—å)  
**–ö–æ–ª–∏—á–µ—Å—Ç–≤–æ –æ—à–∏–±–æ–∫**: 0  
**–ö–∞—á–µ—Å—Ç–≤–æ –∫–æ–¥–∞**: –£–ª—É—á—à–µ–Ω–æ  

–ö–æ–¥ —Ç–µ–ø–µ—Ä—å –ø—Ä–æ—Ö–æ–¥–∏—Ç —Å—Ç–∞—Ç–∏—á–µ—Å–∫–∏–π –∞–Ω–∞–ª–∏–∑ –Ω–∞ –º–∞–∫—Å–∏–º–∞–ª—å–Ω–æ–º —É—Ä–æ–≤–Ω–µ —Å—Ç—Ä–æ–≥–æ—Å—Ç–∏ –±–µ–∑ –æ—à–∏–±–æ–∫!

---

**–î–∞—Ç–∞ –∞–Ω–∞–ª–∏–∑–∞**: 2025-08-05  
**–í–µ—Ä—Å–∏—è Larastan**: 3.6.0  
**–°—Ç–∞—Ç—É—Å**: ‚úÖ –ì–û–¢–û–í –ö –ü–†–û–î–ê–ö–®–ù 